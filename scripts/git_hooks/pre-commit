#!/usr/bin/env bash
# Pre-commit hook to enforce branch naming rules

branch=$(git symbolic-ref --quiet --short HEAD)

# Skip check if not on a branch (e.g., during rebase)
if [[ -z $branch ]]; then
    exit 0
fi

if [[ $branch == master || $branch == main ]]; then
    echo "Direct commits to master are not allowed. Create a feature branch." >&2
    exit 1
fi

if [[ $branch != feature/* ]]; then
    echo "Branch names must start with 'feature/'. Current branch: '$branch'." >&2
    exit 1
fi

exit 0
